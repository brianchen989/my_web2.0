<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>點擊圖片後隱藏並顯示剩餘數量（顯示 5 秒；全部點完顯示恭喜 5 秒）</title>
  <style>
    /* 圖片樣式 */
    img.clickable {
      cursor: pointer;
      width: 150px;
      height: 100px;
      margin: 8px;
      display: inline-block;
    }

    /* 計數顯示：預設隱藏 */
    #counter {
      font-size: 20px;
      font-weight: 600;
      background: #7fdec4;
      padding: 8px 12px;
      border-radius: 6px;
      margin: 12px 8px;
      display: none; /* 預設不顯示，點擊後才顯示 5 秒 */
    }

    /* 恭喜文字特別樣式（放大且置中） */
    #counter.congrats {
      color: #fff;
      background: #9d8b13;
      padding: 16px 24px;
      border-radius: 8px;

      /* 讓恭喜文字置中於整個視窗 */
      position: fixed;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);

      /* 放大字型並確保置中與突出顯示 */
      font-size: 36px;
      font-weight: 700;
      z-index: 1000;
      display: inline-block;
      text-align: center;
      box-shadow: 0 6px 18px rgba(0,0,0,0.25);
    }

    /* 讓每個 section 水平排列且上緣對齊 */
    section {
      display: inline-block;
      vertical-align: top;
    }
  </style>
</head>
<body>

  <!-- 顯示剩餘計數（預設隱藏） -->
  <div id="counter">還剩 5 隻浣熊</div>

  <!-- 圖片區塊 -->
  <section class="sec1">
    <img class="clickable" src="image/浣熊3.png" alt="浣熊1" />
  </section>

  <section class="sec2">
    <img class="clickable" src="image/浣熊3.png" alt="浣熊2" />
  </section>

  <section class="sec3">
    <img class="clickable" src="image/浣熊3.png" alt="浣熊3" />
  </section>

  <section class="sec4">
    <img class="clickable" src="image/浣熊3.png" alt="浣熊4" />
  </section>

  <section class="sec5">
    <img class="clickable" src="image/浣熊3.png" alt="浣熊5" />
  </section>

  <script>
    // 取得元素並做防呆
    const counterEl = document.getElementById('counter');
    if (!counterEl) {
      console.warn('找不到 id="counter" 的元素，腳本停止執行。');
      throw new Error('Missing #counter element');
    }

    const imgs = document.querySelectorAll('img.clickable');
    if (!imgs || imgs.length === 0) {
      console.warn('找不到任何具有 class="clickable" 的 <img>。');
    }

    // 計時器 id（用來在再次點擊時重設）
    let hideTimer = null;
    const HIDE_DELAY_MS = 3000; // 3秒

    // 更新計數並顯示；全部點完時顯示恭喜並在3秒後隱藏
    function updateCountAndShow() {
      const remaining = document.querySelectorAll('img.clickable:not([data-clicked="true"])').length;

      // 清除舊的計時器（如果有）
      if (hideTimer !== null) {
        clearTimeout(hideTimer);
        hideTimer = null;
      }

      if (remaining === 0) {
        // 所有圖片都被點完：顯示恭喜，並在 5 秒後隱藏
        counterEl.textContent = '恭喜！你抓到所有浣熊！';
        counterEl.classList.add('congrats');
        counterEl.style.display = 'inline-block';

        hideTimer = setTimeout(() => {
          counterEl.style.display = 'none';
          counterEl.classList.remove('congrats');
          hideTimer = null;
        }, HIDE_DELAY_MS);

        return;
      }

      // 尚有剩餘：顯示剩餘數字，並在 5 秒後隱藏（若在此期間再次點擊會重設）
      counterEl.classList.remove('congrats');
      counterEl.textContent = `還剩 ${remaining} 隻浣熊`;
      counterEl.style.display = 'block';

      hideTimer = setTimeout(() => {
        counterEl.style.display = 'none';
        hideTimer = null;
      }, HIDE_DELAY_MS);
    }

    // 綁定點擊事件至每張圖片
    imgs.forEach(img => {
      img.addEventListener('click', function () {
        if (this.dataset.clicked === 'true') return;

        // 隱藏圖片但保留位置
        this.style.visibility = 'hidden';
        this.dataset.clicked = 'true';

        updateCountAndShow();
      });
    });

    // 初始化一次計數文字（不顯示，直到第一次點擊）
    const initialRemaining = document.querySelectorAll('img.clickable:not([data-clicked="true"])').length;
    counterEl.textContent = `還剩 ${initialRemaining} 隻浣熊`;
  </script>
</body>
</html>